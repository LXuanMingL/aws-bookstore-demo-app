{"ast":null,"code":"/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { ConsoleLogger as Logger } from '../Logger';\nvar logger = new Logger('ClientDevice_Browser');\nexport function clientInfo() {\n  if (typeof window === 'undefined') {\n    return {};\n  }\n\n  return browserClientInfo();\n}\n\nfunction browserClientInfo() {\n  if (typeof window === 'undefined') {\n    logger.warn('No window object available to get browser client info');\n    return {};\n  }\n\n  var nav = window.navigator;\n\n  if (!nav) {\n    logger.warn('No navigator object available to get browser client info');\n    return {};\n  }\n\n  var platform = nav.platform,\n      product = nav.product,\n      vendor = nav.vendor,\n      userAgent = nav.userAgent,\n      language = nav.language;\n  var type = browserType(userAgent);\n  var timezone = browserTimezone();\n  return {\n    platform: platform,\n    make: product || vendor,\n    model: type.type,\n    version: type.version,\n    appVersion: [type.type, type.version].join('/'),\n    language: language,\n    timezone: timezone\n  };\n}\n\nexport function dimension() {\n  if (typeof window === 'undefined') {\n    logger.warn('No window object available to get browser client info');\n    return {\n      width: 320,\n      height: 320\n    };\n  }\n\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight\n  };\n}\n\nfunction browserTimezone() {\n  var tzMatch = /\\(([A-Za-z\\s].*)\\)/.exec(new Date().toString());\n  return tzMatch ? tzMatch[1] || '' : '';\n}\n\nfunction browserType(userAgent) {\n  var operaMatch = /.+(Opera[\\s[A-Z]*|OPR[\\sA-Z]*)\\/([0-9\\.]+).*/i.exec(userAgent);\n\n  if (operaMatch) {\n    return {\n      type: operaMatch[1],\n      version: operaMatch[2]\n    };\n  }\n\n  var ieMatch = /.+(Trident|Edge)\\/([0-9\\.]+).*/i.exec(userAgent);\n\n  if (ieMatch) {\n    return {\n      type: ieMatch[1],\n      version: ieMatch[2]\n    };\n  }\n\n  var cfMatch = /.+(Chrome|Firefox|FxiOS)\\/([0-9\\.]+).*/i.exec(userAgent);\n\n  if (cfMatch) {\n    return {\n      type: cfMatch[1],\n      version: cfMatch[2]\n    };\n  }\n\n  var sMatch = /.+(Safari)\\/([0-9\\.]+).*/i.exec(userAgent);\n\n  if (sMatch) {\n    return {\n      type: sMatch[1],\n      version: sMatch[2]\n    };\n  }\n\n  var awkMatch = /.+(AppleWebKit)\\/([0-9\\.]+).*/i.exec(userAgent);\n\n  if (awkMatch) {\n    return {\n      type: awkMatch[1],\n      version: awkMatch[2]\n    };\n  }\n\n  var anyMatch = /.*([A-Z]+)\\/([0-9\\.]+).*/i.exec(userAgent);\n\n  if (anyMatch) {\n    return {\n      type: anyMatch[1],\n      version: anyMatch[2]\n    };\n  }\n\n  return {\n    type: '',\n    version: ''\n  };\n}","map":{"version":3,"sources":["../../src/ClientDevice/browser.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { ConsoleLogger as Logger } from '../Logger';\nvar logger = new Logger('ClientDevice_Browser');\nexport function clientInfo() {\n    if (typeof window === 'undefined') {\n        return {};\n    }\n    return browserClientInfo();\n}\nfunction browserClientInfo() {\n    if (typeof window === 'undefined') {\n        logger.warn('No window object available to get browser client info');\n        return {};\n    }\n    var nav = window.navigator;\n    if (!nav) {\n        logger.warn('No navigator object available to get browser client info');\n        return {};\n    }\n    var platform = nav.platform, product = nav.product, vendor = nav.vendor, userAgent = nav.userAgent, language = nav.language;\n    var type = browserType(userAgent);\n    var timezone = browserTimezone();\n    return {\n        platform: platform,\n        make: product || vendor,\n        model: type.type,\n        version: type.version,\n        appVersion: [type.type, type.version].join('/'),\n        language: language,\n        timezone: timezone,\n    };\n}\nexport function dimension() {\n    if (typeof window === 'undefined') {\n        logger.warn('No window object available to get browser client info');\n        return { width: 320, height: 320 };\n    }\n    return {\n        width: window.innerWidth,\n        height: window.innerHeight,\n    };\n}\nfunction browserTimezone() {\n    var tzMatch = /\\(([A-Za-z\\s].*)\\)/.exec(new Date().toString());\n    return tzMatch ? tzMatch[1] || '' : '';\n}\nfunction browserType(userAgent) {\n    var operaMatch = /.+(Opera[\\s[A-Z]*|OPR[\\sA-Z]*)\\/([0-9\\.]+).*/i.exec(userAgent);\n    if (operaMatch) {\n        return { type: operaMatch[1], version: operaMatch[2] };\n    }\n    var ieMatch = /.+(Trident|Edge)\\/([0-9\\.]+).*/i.exec(userAgent);\n    if (ieMatch) {\n        return { type: ieMatch[1], version: ieMatch[2] };\n    }\n    var cfMatch = /.+(Chrome|Firefox|FxiOS)\\/([0-9\\.]+).*/i.exec(userAgent);\n    if (cfMatch) {\n        return { type: cfMatch[1], version: cfMatch[2] };\n    }\n    var sMatch = /.+(Safari)\\/([0-9\\.]+).*/i.exec(userAgent);\n    if (sMatch) {\n        return { type: sMatch[1], version: sMatch[2] };\n    }\n    var awkMatch = /.+(AppleWebKit)\\/([0-9\\.]+).*/i.exec(userAgent);\n    if (awkMatch) {\n        return { type: awkMatch[1], version: awkMatch[2] };\n    }\n    var anyMatch = /.*([A-Z]+)\\/([0-9\\.]+).*/i.exec(userAgent);\n    if (anyMatch) {\n        return { type: anyMatch[1], version: anyMatch[2] };\n    }\n    return { type: '', version: '' };\n}\n//# sourceMappingURL=browser.js.map"]},"metadata":{},"sourceType":"module"}