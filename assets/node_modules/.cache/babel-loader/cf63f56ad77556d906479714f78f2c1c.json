{"ast":null,"code":"var HTML5_MEDIA_EVENT;\n\n(function (HTML5_MEDIA_EVENT) {\n  HTML5_MEDIA_EVENT[\"PLAY\"] = \"play\";\n  HTML5_MEDIA_EVENT[\"PAUSE\"] = \"pause\";\n  HTML5_MEDIA_EVENT[\"ENDED\"] = \"Ended\";\n})(HTML5_MEDIA_EVENT || (HTML5_MEDIA_EVENT = {}));\n\nvar MEDIA_TYPE;\n\n(function (MEDIA_TYPE) {\n  MEDIA_TYPE[\"IFRAME\"] = \"IFRAME\";\n  MEDIA_TYPE[\"VIDEO\"] = \"VIDEO\";\n  MEDIA_TYPE[\"AUDIO\"] = \"AUDIO\";\n})(MEDIA_TYPE || (MEDIA_TYPE = {}));\n\nvar EVENT_TYPE;\n\n(function (EVENT_TYPE) {\n  EVENT_TYPE[\"PLAY\"] = \"Play\";\n  EVENT_TYPE[\"ENDED\"] = \"Ended\";\n  EVENT_TYPE[\"PAUSE\"] = \"Pause\";\n  EVENT_TYPE[\"TIME_WATCHED\"] = \"TimeWatched\";\n})(EVENT_TYPE || (EVENT_TYPE = {}));\n\nvar MediaAutoTrack =\n/** @class */\nfunction () {\n  function MediaAutoTrack(params, provider) {\n    var _a;\n\n    this.eventActionMapping = (_a = {}, _a[EVENT_TYPE.ENDED] = this.endedEventAction.bind(this), _a[EVENT_TYPE.PLAY] = this.playEventAction.bind(this), _a[EVENT_TYPE.PAUSE] = this.pauseEventAction.bind(this), _a);\n    var eventData = params.eventData;\n    this._params = params;\n    this._mediaElement = document.getElementById(eventData.properties['domElementId']);\n    this._started = false;\n    this._provider = provider;\n    var mediaTrackFunMapping = {\n      IFRAME: this._iframeMediaTracker,\n      VIDEO: this._html5MediaTracker,\n      AUDIO: this._html5MediaTracker\n    };\n\n    mediaTrackFunMapping[this._mediaElement.tagName].bind(this)();\n\n    this._initYoutubeFrame();\n  }\n\n  MediaAutoTrack.prototype._initYoutubeFrame = function () {\n    this._youTubeIframeLoader = {\n      src: 'https://www.youtube.com/iframe_api',\n      loading: false,\n      loaded: false,\n      listeners: [],\n      load: function load(callback) {\n        var _this = this;\n\n        this.listeners.push(callback);\n\n        if (this.loaded) {\n          setTimeout(function () {\n            _this.done();\n          });\n          return;\n        }\n\n        if (this.loading) {\n          return;\n        }\n\n        this.loading = true;\n\n        window['onYouTubeIframeAPIReady'] = function () {\n          _this.loaded = true;\n\n          _this.done();\n        };\n\n        var script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.src = this.src;\n        document.body.appendChild(script);\n      },\n      done: function done() {\n        delete window['onYouTubeIframeAPIReady'];\n\n        while (this.listeners.length) {\n          this.listeners.pop()(window['YT']);\n        }\n      }\n    };\n  };\n\n  MediaAutoTrack.prototype._iframeMediaTracker = function () {\n    var that = this;\n    setInterval(function () {\n      if (that._started) {\n        that.recordEvent(MEDIA_TYPE.IFRAME, EVENT_TYPE.TIME_WATCHED);\n      }\n    }, 3 * 1000);\n\n    this._youTubeIframeLoader.load(function (YT) {\n      that._iframePlayer = new YT.Player(that._mediaElement.id, {\n        events: {\n          onStateChange: that._onPlayerStateChange.bind(that)\n        }\n      });\n    });\n  };\n\n  MediaAutoTrack.prototype._onPlayerStateChange = function (event) {\n    var iframeEventMapping = {\n      0: EVENT_TYPE.ENDED,\n      1: EVENT_TYPE.PLAY,\n      2: EVENT_TYPE.PAUSE\n    };\n    var eventType = iframeEventMapping[event.data];\n\n    if (eventType) {\n      this.eventActionMapping[eventType](MEDIA_TYPE.IFRAME);\n    }\n  };\n\n  MediaAutoTrack.prototype._html5MediaTracker = function () {\n    var that = this;\n    setInterval(function () {\n      if (that._started) {\n        that.recordEvent(MEDIA_TYPE.VIDEO, EVENT_TYPE.TIME_WATCHED);\n      }\n    }, 3 * 1000);\n\n    this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.PLAY, function () {\n      that.eventActionMapping[EVENT_TYPE.PLAY](MEDIA_TYPE.VIDEO);\n    }, false);\n\n    this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.PAUSE, function () {\n      that.eventActionMapping[EVENT_TYPE.PAUSE](MEDIA_TYPE.VIDEO);\n    }, false);\n\n    this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.ENDED, function () {\n      that.eventActionMapping[EVENT_TYPE.ENDED](MEDIA_TYPE.VIDEO);\n    }, false);\n  };\n\n  MediaAutoTrack.prototype.playEventAction = function (mediaType) {\n    this._started = true;\n    this.recordEvent(mediaType, EVENT_TYPE.PLAY);\n  };\n\n  MediaAutoTrack.prototype.pauseEventAction = function (mediaType) {\n    this._started = false;\n    this.recordEvent(mediaType, EVENT_TYPE.PAUSE);\n  };\n\n  MediaAutoTrack.prototype.endedEventAction = function (mediaType) {\n    this._started = false;\n    this.recordEvent(mediaType, EVENT_TYPE.ENDED);\n  };\n\n  MediaAutoTrack.prototype.recordEvent = function (mediaType, eventType) {\n    var newParams = Object.assign({}, this._params);\n    var eventData = newParams.eventData;\n    eventData.eventType = eventType;\n\n    if (mediaType === MEDIA_TYPE.VIDEO) {\n      eventData.properties.timestamp = this._mediaElement.currentTime;\n      eventData.properties.duration = this._mediaElement.duration;\n    } else {\n      eventData.properties.timestamp = this._financial(this._iframePlayer.getCurrentTime());\n      eventData.properties.duration = this._financial(this._iframePlayer.getDuration());\n    }\n\n    var percentage = parseFloat(eventData.properties.timestamp) / parseFloat(eventData.properties.duration);\n    eventData.properties.eventValue = Number(percentage.toFixed(4));\n    delete eventData.properties.domElementId;\n\n    this._provider.putToBuffer(newParams);\n  };\n\n  MediaAutoTrack.prototype._financial = function (x) {\n    return Number.parseFloat(x).toFixed(4);\n  };\n\n  return MediaAutoTrack;\n}();\n\nexport { MediaAutoTrack };","map":{"version":3,"sources":["../../../src/Providers/AmazonPersonalizeHelper/MediaAutoTrack.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var HTML5_MEDIA_EVENT;\n(function (HTML5_MEDIA_EVENT) {\n    HTML5_MEDIA_EVENT[\"PLAY\"] = \"play\";\n    HTML5_MEDIA_EVENT[\"PAUSE\"] = \"pause\";\n    HTML5_MEDIA_EVENT[\"ENDED\"] = \"Ended\";\n})(HTML5_MEDIA_EVENT || (HTML5_MEDIA_EVENT = {}));\nvar MEDIA_TYPE;\n(function (MEDIA_TYPE) {\n    MEDIA_TYPE[\"IFRAME\"] = \"IFRAME\";\n    MEDIA_TYPE[\"VIDEO\"] = \"VIDEO\";\n    MEDIA_TYPE[\"AUDIO\"] = \"AUDIO\";\n})(MEDIA_TYPE || (MEDIA_TYPE = {}));\nvar EVENT_TYPE;\n(function (EVENT_TYPE) {\n    EVENT_TYPE[\"PLAY\"] = \"Play\";\n    EVENT_TYPE[\"ENDED\"] = \"Ended\";\n    EVENT_TYPE[\"PAUSE\"] = \"Pause\";\n    EVENT_TYPE[\"TIME_WATCHED\"] = \"TimeWatched\";\n})(EVENT_TYPE || (EVENT_TYPE = {}));\nvar MediaAutoTrack = /** @class */ (function () {\n    function MediaAutoTrack(params, provider) {\n        var _a;\n        this.eventActionMapping = (_a = {},\n            _a[EVENT_TYPE.ENDED] = this.endedEventAction.bind(this),\n            _a[EVENT_TYPE.PLAY] = this.playEventAction.bind(this),\n            _a[EVENT_TYPE.PAUSE] = this.pauseEventAction.bind(this),\n            _a);\n        var eventData = params.eventData;\n        this._params = params;\n        this._mediaElement = document.getElementById(eventData.properties['domElementId']);\n        this._started = false;\n        this._provider = provider;\n        var mediaTrackFunMapping = {\n            IFRAME: this._iframeMediaTracker,\n            VIDEO: this._html5MediaTracker,\n            AUDIO: this._html5MediaTracker,\n        };\n        mediaTrackFunMapping[this._mediaElement.tagName].bind(this)();\n        this._initYoutubeFrame();\n    }\n    MediaAutoTrack.prototype._initYoutubeFrame = function () {\n        this._youTubeIframeLoader = {\n            src: 'https://www.youtube.com/iframe_api',\n            loading: false,\n            loaded: false,\n            listeners: [],\n            load: function (callback) {\n                var _this = this;\n                this.listeners.push(callback);\n                if (this.loaded) {\n                    setTimeout(function () {\n                        _this.done();\n                    });\n                    return;\n                }\n                if (this.loading) {\n                    return;\n                }\n                this.loading = true;\n                window['onYouTubeIframeAPIReady'] = function () {\n                    _this.loaded = true;\n                    _this.done();\n                };\n                var script = document.createElement('script');\n                script.type = 'text/javascript';\n                script.src = this.src;\n                document.body.appendChild(script);\n            },\n            done: function () {\n                delete window['onYouTubeIframeAPIReady'];\n                while (this.listeners.length) {\n                    this.listeners.pop()(window['YT']);\n                }\n            },\n        };\n    };\n    MediaAutoTrack.prototype._iframeMediaTracker = function () {\n        var that = this;\n        setInterval(function () {\n            if (that._started) {\n                that.recordEvent(MEDIA_TYPE.IFRAME, EVENT_TYPE.TIME_WATCHED);\n            }\n        }, 3 * 1000);\n        this._youTubeIframeLoader.load(function (YT) {\n            that._iframePlayer = new YT.Player(that._mediaElement.id, {\n                events: { onStateChange: that._onPlayerStateChange.bind(that) },\n            });\n        });\n    };\n    MediaAutoTrack.prototype._onPlayerStateChange = function (event) {\n        var iframeEventMapping = {\n            0: EVENT_TYPE.ENDED,\n            1: EVENT_TYPE.PLAY,\n            2: EVENT_TYPE.PAUSE,\n        };\n        var eventType = iframeEventMapping[event.data];\n        if (eventType) {\n            this.eventActionMapping[eventType](MEDIA_TYPE.IFRAME);\n        }\n    };\n    MediaAutoTrack.prototype._html5MediaTracker = function () {\n        var that = this;\n        setInterval(function () {\n            if (that._started) {\n                that.recordEvent(MEDIA_TYPE.VIDEO, EVENT_TYPE.TIME_WATCHED);\n            }\n        }, 3 * 1000);\n        this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.PLAY, function () {\n            that.eventActionMapping[EVENT_TYPE.PLAY](MEDIA_TYPE.VIDEO);\n        }, false);\n        this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.PAUSE, function () {\n            that.eventActionMapping[EVENT_TYPE.PAUSE](MEDIA_TYPE.VIDEO);\n        }, false);\n        this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.ENDED, function () {\n            that.eventActionMapping[EVENT_TYPE.ENDED](MEDIA_TYPE.VIDEO);\n        }, false);\n    };\n    MediaAutoTrack.prototype.playEventAction = function (mediaType) {\n        this._started = true;\n        this.recordEvent(mediaType, EVENT_TYPE.PLAY);\n    };\n    MediaAutoTrack.prototype.pauseEventAction = function (mediaType) {\n        this._started = false;\n        this.recordEvent(mediaType, EVENT_TYPE.PAUSE);\n    };\n    MediaAutoTrack.prototype.endedEventAction = function (mediaType) {\n        this._started = false;\n        this.recordEvent(mediaType, EVENT_TYPE.ENDED);\n    };\n    MediaAutoTrack.prototype.recordEvent = function (mediaType, eventType) {\n        var newParams = Object.assign({}, this._params);\n        var eventData = newParams.eventData;\n        eventData.eventType = eventType;\n        if (mediaType === MEDIA_TYPE.VIDEO) {\n            eventData.properties.timestamp = this._mediaElement.currentTime;\n            eventData.properties.duration = this._mediaElement.duration;\n        }\n        else {\n            eventData.properties.timestamp = this._financial(this._iframePlayer.getCurrentTime());\n            eventData.properties.duration = this._financial(this._iframePlayer.getDuration());\n        }\n        var percentage = parseFloat(eventData.properties.timestamp) /\n            parseFloat(eventData.properties.duration);\n        eventData.properties.eventValue = Number(percentage.toFixed(4));\n        delete eventData.properties.domElementId;\n        this._provider.putToBuffer(newParams);\n    };\n    MediaAutoTrack.prototype._financial = function (x) {\n        return Number.parseFloat(x).toFixed(4);\n    };\n    return MediaAutoTrack;\n}());\nexport { MediaAutoTrack };\n//# sourceMappingURL=MediaAutoTrack.js.map"]},"metadata":{},"sourceType":"module"}